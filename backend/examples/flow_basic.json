{
  "nodes": [
    {
      "id": "trigger_1",
      "type": "trigger.webhook",
      "config": {}
    },
    {
      "id": "chat_1",
      "type": "action.chat",
      "config": {
        "system_prompt": "You are a helpful assistant that summarizes a user's message and crafts a subject. Message from {{payload.name}}: {{payload.message}}"
      }
    },
    {
      "id": "cond_1",
      "type": "logic.condition",
      "config": {
        "left": "{{payload.message}}",
        "op": "contains",
        "right": "urgent"
      }
    },
    {
      "id": "sms_1",
      "type": "action.send_sms",
      "config": {
        "to": "+15551234567",
        "content": "Chat said: {{nodes.chat_1.generated_response}}"
      }
    },
    {
      "id": "email_1",
      "type": "action.send_email",
      "config": {
        "to": "user@example.com",
        "subject": "Auto-reply: {{payload.name}}",
        "content": "We received your message: {{payload.message}}. Assistant: {{nodes.chat_1.generated_response}}"
      }
    },
    {
      "id": "end_1",
      "type": "logic.end",
      "config": {}
    }
  ],
  "edges": [
    {
      "source": "trigger_1",
      "target": "chat_1"
    },
    {
      "source": "chat_1",
      "source_port": "success",
      "target": "cond_1"
    },
    {
      "source": "cond_1",
      "source_port": "true",
      "target": "sms_1"
    },
    {
      "source": "cond_1",
      "source_port": "false",
      "target": "email_1"
    },
    {
      "source": "sms_1",
      "target": "end_1"
    },
    {
      "source": "email_1",
      "target": "end_1"
    }
  ],
  "entry": "trigger_1"
}